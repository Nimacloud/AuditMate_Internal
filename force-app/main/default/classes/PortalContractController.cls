public without sharing class PortalContractController {

    @AuraEnabled
    public static Opportunity getActiveContract(Id accountId) {

        Opportunity[] records = [SELECT

                                    Price_Increase_Message__c,
                                    year5_test_covered__c,
                                    Price_Increase__c,
                                    year5_test_date__c,
                                    Additional_Liquidated_Damages__c,
                                    Adjuster_1_5_Billing_Rate__c,
                                    Adjuster_1_7_Billing_Rate__c,
                                    Adjuster_Double_Billing_Rate__c,
                                    Adjuster_Standard_Rate__c,
                                    Annual_test_covered__c,
                                    Annual_test_date__c,
                                    Billing_Frequency__c,
                                    Bonus_Time_Only__c,
                                    Call_Back_Coverage__c,
                                    Call_Back_Hours_Available__c,
                                    Call_Back_Included_End_Time__c,
                                    Call_Back_Included_Start_Time__c,
                                    Cancelation_Requirement__c,
                                    Cancelation_window_end__c,
                                    Cancelation_window_end_date__c,
                                    cancelation_window_start_date__c,
                                    CARE_End__c,
                                    CARE_Start__c,
                                    Cleandown_Covered__c,
                                    Commitment_Terms__c,
                                    Contract_Renewal__c,
                                    Coverage_end_time__c,
                                    CoverageHours__c,
                                    Coverage_Hours__c,
                                    Coverage_start_time__c,
                                    Covered_Excluded_Item_Notes__c,
                                    Crew_1_5_Billing_Rate__c,
                                    Crew_1_7_Billing_Rate__c,
                                    Crew_Double_Billing_Rate__c,
                                    Crew_Standard_Rate__c,
                                    Cure_Clause_Language__c,
                                    Cure_Clause_present__c,
                                    Cure_Clause_terms_days__c,
                                    Days_Prior_to_Testing_for_Notification__c,
                                    Days_to_Provide_Testing_Completion__c,
                                    Describe_your_vendor_in_one_word__c,
                                    Describe_your_VT_Portfolio__c,
                                    Discovery_Completed__c,
                                    Elevator_maintenance_price__c,
                                    Elevator_Vendor_Account__c,
                                    Customer_Number__c,
                                    Excluded_Items__c,
                                    Expiration_date__c,
                                    Expiration_window_start__c,
                                    Frequency_of_service__c,
                                    Helper_1_5_Billing_Rate__c,
                                    Helper_1_7_Billing_Rate__c,
                                    Helper_Double_Billing_Rate__c,
                                    Helper_Standard_Billing_Rate__c,
                                    Hourly_requirement__c,
                                    Hourly_Requirement_Escalator__c,
                                    Hourly_Requirement_Hydro__c,
                                    Hourly_Requirement_Other__c,
                                    Hourly_Requirement_Traction__c,
                                    How_are_Invoices_Processed__c,
                                    How_to_simplify_your_vendor_management__c,
                                    Index_Testing_Covered__c,
                                    Industry__c,
                                    LD_Callbacks_Within_30_Day_Condition__c,
                                    LD_Callbacks_Within_30_Day_Damage_Amount__c,
                                    LD_Callbacks_within_30_Day_Damage_Freque__c,
                                    LD_CAT1_Days_Past_Due_Condition__c,
                                    LD_CAT1_Days_Past_Due_Damage_Amount__c,
                                    LD_CAT1_Days_Past_Due_Damage_Frequency__c,
                                    LD_CAT5_Days_Past_Due_Condition__c,
                                    LD_CAT5_Days_Past_Due_Damage_Amount__c,
                                    LD_CAT5_Days_Past_Due_Damage_Frequency__c,
                                    LD_Inspection_Damage_Amount__c,
                                    LD_Inspection_Damage_Frequency__c,
                                    LD_Inspection_Days_Past_Due_Condition__c,
                                    LD_Maintenance_Damage_Amount__c,
                                    LD_Maintenance_Damage_Frequency__c,
                                    LD_Maintenance_Days_Past_Due_Condition__c,
                                    LD_Response_Time_Condition__c,
                                    LD_Response_Time_Damage_Amount__c,
                                    LD_Response_Time_Damage_Frequency__c,
                                    LD_Unit_OOS_Billing_Suspension__c,
                                    LD_Unit_OOS_Damage_Amount__c,
                                    LD_Unit_OOS_Damage_Frequency__c,
                                    LD_Unit_OOS_Hours_Condition__c,
                                    Loss_Reason__c,
                                    Major_Repair_Coverage__c,
                                    MCP_Required__c,
                                    Mechanic_1_5_Billing_Rate__c,
                                    Mechanic_1_7_Billing_Rate__c,
                                    mechanic_double_billing_rate__c,
                                    Mechanic_Standard_Billing_Rate__c,
                                    Minor_Repair_Coverage__c,
                                    Monthly_Fire_Service_Testing__c,
                                    Monthly_Stand_By_Power_Operation_Test__c,
                                    Next_Price_Increase_Date__c,
                                    Notification_Prior_to_Testing_Required__c,
                                    Number_of_Elevators__c,
                                    Number_of_Escalators__c,
                                    Number_of_Other__c,
                                    Obsolescence_Language__c,
                                    Opportunity__c,
                                    Order__c,
                                    Order_Generated__c,
                                    OT_Callbacks_included_if__c,
                                    Parts_Mark_Up_Maximum__c,
                                    Price_Increase_justification__c,
                                    Price_Increase_Maximum__c,
                                    Response_Time_OT_In_Hours__c,
                                    Response_Time_OT_Entrapment__c,
                                    Response_Time_ST_In_Hours__c,
                                    Reponse_Time_ST_Entrapment__c,
                                    Right_To_Audit_Clause__c,
                                    ROI_Analysis_Completed__c,
                                    Start_Date__c,
                                    Testing_Completed_Notification_Required__c,
                                    Type_of_Vendor_Contract__c,
                                    Unit_OOS_Liquidated_Damage__c,
                                    Units_Requiring_OT_Maintenance__c,
                                    Vendor_Contract_Number__c,
                                    Vendor_Contract_Stage__c,
                                    Vendor_Portal_Access_Required__c,
                                    What_is_your_Frequency_of_Service__c,
                                    AccountId,
                                    Amount,
                                    CloseDate,
                                    ContractId,
                                    CreatedById,
                                    Description,
                                    ExpectedRevenue,
                                    ForecastCategoryName,
                                    LastModifiedById,
                                    LeadSource,
                                    NextStep,
                                    Name,
                                    OwnerId,
                                    RecordTypeId,
                                    PartnerAccountId,
                                    IsPrivate,
                                    Probability,
                                    TotalOpportunityQuantity,
                                    IqScore,
                                    StageName,
                                    Overtime_Repair_Cost__c,
                                    Type
                                FROM Opportunity
                                WHERE RecordType.DeveloperName = 'Vendor_Contract'
                                AND IsWon = true
                                AND AccountId = :accountId];

        return records.isEmpty() ? null : records[0];
    }
}